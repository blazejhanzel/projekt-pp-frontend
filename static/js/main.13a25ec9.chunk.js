(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},33:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),i=n(18),o=n.n(i),r=(n(135),n(4)),s=(n(33),n(17)),d=(n(136),n(7)),u=n(1);var j=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)([]),j=Object(r.a)(o,2);return j[0],j[1],Object(a.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,a=[],c=Object(s.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;a.push(Object(u.jsx)("option",{value:o.id,children:o.name}))}}catch(r){c.e(r)}finally{c.f()}i(a)}}))}))}),[]),Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsx)("select",{id:"section",name:"sections",children:c}),Object(u.jsx)("input",{type:"text",id:"topic_filed",placeholder:"Nazwa tematu"}),Object(u.jsx)("textarea",{}),Object(u.jsx)("button",{type:"button",onClick:function(){var e=document.getElementById("section");alert(e.selectedValue)},children:"Dodaj w\u0105tek"})]})};n(432);var l=function(e){var t=new XMLHttpRequest;return t.onreadystatechange=function(){4==this.readyState&&e.setPage(e.PageEnum.home)},t.open("GET","https://projekt-pp-backend.herokuapp.com/swagger-ui.html",!0),t.send(),Object(u.jsx)("div",{id:"HerokuWait",children:Object(u.jsx)("div",{id:"container",children:Object(u.jsxs)("div",{id:"box",children:[Object(u.jsx)("div",{className:"lds-dual-ring"}),Object(u.jsx)("h1",{children:"Page is being loaded..."}),Object(u.jsx)("h3",{children:"Server is starting, this can take up to one minute..."}),Object(u.jsx)("h5",{children:"Servers are going to sleep automatically when no load is detected to save server resources."})]})})})};var h=function(e){return Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("div",{children:e.title}),Object(u.jsx)("div",{className:"username",children:e.author&&"@"+e.author}),Object(u.jsx)("div",{className:"info",children:e.description})]})};var p=function(e){return Object(u.jsxs)("div",{className:"post",children:[Object(u.jsxs)("div",{className:"username",children:["@",e.author]}),Object(u.jsx)("div",{className:"info",children:e.createDate.slice(0,19).replace("T"," ")}),e.title]})};var b=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,a=[],c=Object(s.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;a.push(Object(u.jsx)(p,{title:o.text,author:o.author.login,createDate:o.createDate}))}}catch(r){c.e(r)}finally{c.f()}i(a)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")},children:Object(u.jsx)(h,{title:e.sectionName})}),Object(u.jsxs)("div",{className:"threads",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.section)},children:Object(u.jsx)(h,{title:e.threadName,description:e.threadDescription,author:e.threadAuthor})}),Object(u.jsx)("div",{className:"topics",children:c})]})]})};var f=function(){return Object(u.jsxs)("div",{id:"registerForm",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("input",{type:"text",id:"email_form",placeholder:"email"}),Object(u.jsx)("button",{type:"button",onClick:function(){var e={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value,email:document.getElementById("email_form").value};fetch("https://projekt-pp-backend.herokuapp.com/user",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){200===e.status?(document.location.reload(),alert("Mo\u017cesz si\u0119 zalogowa\u0107")):alert(e.status)}))}))},children:"Zarejestruj"})]})};var m=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var a,c=[],o=Object(s.a)(n);try{var r=function(){var t=a.value;c.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/"+n,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(a){200==t.status&&(e.setSectionId(n),e.setPage(e.PageEnum.section),e.setSectionName(a.name))}))}));var n},children:Object(u.jsx)(h,{title:t.name})}))};for(o.s();!(a=o.n()).done;)r()}catch(j){o.e(j)}finally{o.f()}i(c)}}))}))}),[]),Object(u.jsx)("div",{className:"sections",children:c})},O=n(82),g=n.n(O),v=n(130),x=(n(433),n(131));var k=function(e){return Object(u.jsx)("div",{className:"popularItem",children:Object(u.jsx)("div",{children:e.title})})};var y=function(e){var t=Object(a.useState)(Object(d.getCookie)("jwt")),n=Object(r.a)(t,2),c=n[0],i=(n[1],Object(a.useState)("Zaloguj")),o=Object(r.a)(i,2),j=o[0],l=o[1],h=c?Object(x.a)(Object(d.getCookie)("jwt")).sub:"unknown",p=Object(a.useState)([]),b=Object(r.a)(p,2),f=b[0],m=b[1],O=function(){Object(d.setCookie)("jwt","",-1),document.location.reload()},y=function(){e.setPage(e.PageEnum.register)},w=function(e){},C=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("Logowanie..."),t={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value},fetch("https://projekt-pp-backend.herokuapp.com/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){200===e.status?(Object(d.setCookie)("jwt",t.jwt,10),document.location.reload()):alert(e.status)}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"sidebar",children:[function(){if(e.page!=e.PageEnum.register)return c?Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsxs)("p",{children:["@",h]}),Object(u.jsx)("button",{type:"button",onClick:O,children:"Wyloguj"})]}):Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("button",{type:"button",onClick:C,children:j}),Object(u.jsx)("button",{type:"button",onClick:y,children:"Zarejestruj"})]})}(),Object(u.jsx)("input",{type:"text",id:"search_form",placeholder:"wyszukaj"}),Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:function(){fetch("https://projekt-pp-backend.herokuapp.com/mostPopularTopics/1",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,a=[],c=0,i=Object(s.a)(t);try{var o=function(){var e=n.value;if(c++,a.push(Object(u.jsx)("div",{onClick:function(){return w(e.id)},children:Object(u.jsx)(k,{title:e.title})})),c>4)return"break"};for(i.s();!(n=i.n()).done;){if("break"===o())break}}catch(r){i.e(r)}finally{i.f()}m(a)}}))}))},children:"Najpopularniejsze tematy"}),Object(u.jsx)("div",{className:"popularThreads",children:f}),Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:function(){e.setPage(e.PageEnum.add_thread)},children:"Dodaj w\u0105tek"}),Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:function(){e.setPage(e.PageEnum.home)},children:"Strona G\u0142\xf3wna"})]})};var w=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),c=n[0],i=n[1],o=function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")};return Object(a.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var a,c=[],r=Object(s.a)(n);try{var j=function(){var t=a.value;c.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/topic/"+n,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(a){200==t.status&&(e.setThreadId(n),e.setPage(e.PageEnum.thread),e.setThreadName(a.title),e.setThreadDescription(a.description),e.setThreadAuthor(a.authorId))}))}));var n},children:Object(u.jsx)(h,{title:t.title,closeSection:o,description:t.description,author:t.authorId})}))};for(r.s();!(a=r.n()).done;)j()}catch(l){r.e(l)}finally{r.f()}i(c)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:o,children:Object(u.jsx)(h,{title:e.sectionName})}),Object(u.jsx)("div",{className:"threads",children:c})]})};var C=function(){var e=Object.freeze({heroku_wait:0,home:1,register:2,section:3,thread:4,add_thread:5}),t=Object(a.useState)(e.heroku_wait),n=Object(r.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(0),s=Object(r.a)(o,2),d=s[0],h=s[1],p=Object(a.useState)("Wczytywanie..."),O=Object(r.a)(p,2),g=O[0],v=O[1],x=Object(a.useState)("Wczytywanie..."),k=Object(r.a)(x,2),C=k[0],N=k[1],T=Object(a.useState)("Wczytywanie..."),P=Object(r.a)(T,2),S=P[0],E=P[1],_=Object(a.useState)("Wczytywanie..."),I=Object(r.a)(_,2),z=I[0],B=I[1],A=Object(a.useState)(0),D=Object(r.a)(A,2),G=D[0],F=D[1];return Object(u.jsxs)("div",{id:"app",children:[Object(u.jsx)(y,{page:c,setPage:i,PageEnum:e}),Object(u.jsx)("div",{className:"container",children:function(){switch(c){case e.heroku_wait:return Object(u.jsx)(l,{setPage:i,PageEnum:e});case e.home:return Object(u.jsx)(m,{setPage:i,PageEnum:e,setSectionId:h,setSectionName:v});case e.register:return Object(u.jsx)(f,{});case e.section:return Object(u.jsx)(w,{setPage:i,PageEnum:e,sectionName:g,sectionId:d,setSectionName:v,setThreadName:N,setThreadDescription:E,setThreadAuthor:B,setThreadId:F});case e.thread:return Object(u.jsx)(b,{setPage:i,PageEnum:e,sectionName:g,setSectionName:v,threadName:C,threadDescription:S,threadAuthor:z,threadId:G});case e.add_thread:return Object(u.jsx)(j,{})}}()})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),N()},7:function(e,t){e.exports.getCookie=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var c=n[a];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(t))return c.substring(t.length,c.length)}return""},e.exports.setCookie=function(e,t,n){var a=new Date;a.setTime(a.getTime()+60*n*60*1e3);var c="expires="+a.toUTCString();document.cookie=e+"="+t+";"+c+";path=/"}}},[[434,1,2]]]);
//# sourceMappingURL=main.13a25ec9.chunk.js.map