(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{264:function(e,t,n){},5:function(e,t){e.exports.getCookie=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},e.exports.setCookie=function(e,t,n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3);var a="expires="+o.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}},557:function(e,t,n){},558:function(e,t,n){},59:function(e,t,n){},611:function(e,t){},613:function(e,t){},623:function(e,t){},625:function(e,t){},650:function(e,t){},652:function(e,t){},653:function(e,t){},658:function(e,t){},660:function(e,t){},679:function(e,t){},691:function(e,t){},694:function(e,t){},697:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n.n(o),c=n(33),i=n.n(c),r=(n(264),n(7)),s=(n(59),n(17)),d=(n(160),n(5)),u=n(1);var j=function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(null),j=Object(r.a)(i,2),h=j[0],p=j[1];return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section/",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,o=[],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.push(Object(u.jsx)("option",{value:i.id,children:i.name}))}}catch(r){a.e(r)}finally{a.f()}c(o)}}))}))}),[]),Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsxs)("select",{id:"section",name:"sections",onChange:function(e){p(e.target.value)},children:[Object(u.jsx)("option",{value:"null",children:"Wybierz sekcj\u0119"}),a]}),Object(u.jsx)("input",{type:"text",id:"topic_field",placeholder:"Nazwa tematu"}),Object(u.jsx)("textarea",{id:"description"}),Object(u.jsx)("button",{type:"button",onClick:function(){if(null!=h){var e=document.getElementById("topic_field").value,t=document.getElementById("description").value;if(e&&t){var n={title:e,description:t};fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(h,"/topic"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(n)}).then((function(e){return e.json().then((function(t){200==e.status?(alert("Temat dodano pomy\u015blnie!"),window.location.reload()):alert(e.status)}))}))}}},children:"Dodaj temat"})]})};var h=function(e){return Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsx)("input",{type:"text",id:"section_field",placeholder:"Nazwa sekcji"}),Object(u.jsx)("button",{type:"button",onClick:function(){var e=document.getElementById("section_field").value;if(e){var t={name:e,moderatorId:"60cbac661c37770501af8599"};fetch("https://projekt-pp-backend.herokuapp.com/section",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){200==e.status?alert("Sekcje dodano pomy\u015blnie!"):alert(e.status)}))}))}},children:"Dodaj sekcje"})]})};n(557);var p=function(e){var t=new XMLHttpRequest;return t.onreadystatechange=function(){4==this.readyState&&e.setPage(e.PageEnum.home)},t.open("GET","https://projekt-pp-backend.herokuapp.com/swagger-ui.html",!0),t.send(),Object(u.jsx)("div",{id:"HerokuWait",children:Object(u.jsx)("div",{id:"container",children:Object(u.jsxs)("div",{id:"box",children:[Object(u.jsx)("div",{className:"lds-dual-ring"}),Object(u.jsx)("h1",{children:"Page is being loaded..."}),Object(u.jsx)("h3",{children:"Server is starting, this can take up to one minute..."}),Object(u.jsx)("h5",{children:"Servers are going to sleep automatically when no load is detected to save server resources."})]})})})},l=n(32);var b=function(e){return Object(u.jsxs)("div",{className:"item",children:[function(){if(null!==Object(l.a)(Object(d.getCookie)("jwt"))&&(e.author===Object(l.a)(Object(d.getCookie)("jwt")).sub||"ROLE_ADMIN"===e.postRole))return Object(u.jsx)("button",{className:"small-button",onClick:e.onClick,children:"Usu\u0144"})}(),Object(u.jsx)("div",{children:e.title}),Object(u.jsx)("div",{className:"username",children:e.author&&"@"+e.author}),Object(u.jsx)("div",{className:"info",children:e.description})]})};var f,m=function(e){return Object(u.jsxs)("div",{className:"post",children:[function(){if(null!==Object(l.a)(Object(d.getCookie)("jwt"))&&(e.author===Object(l.a)(Object(d.getCookie)("jwt")).sub||"ROLE_ADMIN"===e.postRole))return Object(u.jsx)("button",{className:"small-button",onClick:e.onClick,children:"Usu\u0144"})}(),Object(u.jsxs)("div",{className:"username",children:["@",e.author]}),Object(u.jsx)("div",{className:"info",children:e.createDate.slice(0,19).replace("T"," ")}),e.title]})};var O=function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1],i=function(){var t={text:document.getElementById("post_text").value};fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(t)}).then((function(t){return t.json().then((function(n){200==t.status?(e.setPage(e.PageEnum.section),e.setPage(e.PageEnum.thread)):alert(t.status)}))}))};return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/authorities",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){200==e.status&&(f=t[0].authority)}))})),fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,a=[],i=Object(s.a)(n);try{var r=function(){var t=o.value;a.push(Object(u.jsx)(m,{title:t.text,author:t.login,createDate:t.createDate,onClick:function(){var n;n=t.id,fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post/").concat(n),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){e.ok?document.location.reload():alert("b\u0142\u0105d")}))},postRole:f}))};for(i.s();!(o=i.n()).done;)r()}catch(j){i.e(j)}finally{i.f()}c(a)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")},children:Object(u.jsx)(b,{title:e.sectionName,type:"section"})}),Object(u.jsxs)("div",{className:"threads",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.section)},children:Object(u.jsx)(b,{title:e.threadName,description:e.threadDescription,author:e.threadAuthor,type:"topic"})}),Object(u.jsx)("div",{className:"topics",children:a})]}),function(){if(console.log(e.userLogged),"unknown"!=e.userLogged)return Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsx)("textarea",{id:"post_text"}),Object(u.jsx)("button",{type:"button",onClick:i,children:"Dodaj odpowied\u017a"})]})}()]})};var g,k=function(){return Object(u.jsxs)("div",{id:"registerForm",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("input",{type:"text",id:"email_form",placeholder:"email"}),Object(u.jsx)("button",{type:"button",onClick:function(){var e={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value,email:document.getElementById("email_form").value};fetch("https://projekt-pp-backend.herokuapp.com/register",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){200===e.status?(document.location.reload(),alert("Mo\u017cesz si\u0119 zalogowa\u0107")):alert(e.status)}))}))},children:"Zarejestruj"})]})};var v=function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1];return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/authorities",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){200==e.status&&(g=t[0].authority)}))})),fetch("https://projekt-pp-backend.herokuapp.com/section/",{method:"GET"}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,a=[],i=Object(s.a)(n);try{var r=function(){var t=o.value;a.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(o){200==t.status&&(e.setSectionId(n),e.setPage(e.PageEnum.section),e.setSectionName(o.name))}))}));var n},children:Object(u.jsx)(b,{title:t.name,onClick:function(){return e=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){e.ok?document.location.reload():alert("b\u0142\u0105d")}));var e},postRole:g,type:"sections"})}))};for(i.s();!(o=i.n()).done;)r()}catch(j){i.e(j)}finally{i.f()}c(a)}}))}))}),[]),Object(u.jsx)("div",{className:"sections",children:a})},x=n(158),y=n.n(x),C=n(260);n(558);var T=function(e){return Object(u.jsx)("div",{className:"popularItem",onClick:e.onClick,children:Object(u.jsx)("div",{children:e.title})})};var w,E=function(e){var t=function(){var t={text:document.getElementById("post_text").value};fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(t)}).then((function(t){return t.json().then((function(n){200==t.status?fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,a=[],c=Object(s.a)(n);try{for(c.s();!(o=c.n()).done;){var i=o.value;a.push(Object(u.jsx)(m,{title:i.text,author:i.login,createDate:i.createDate}))}}catch(r){c.e(r)}finally{c.f()}e.setPopularPosts(a)}}))})):alert(t.status)}))}))};return Object(o.useEffect)((function(){}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsxs)("div",{className:"threads",children:[Object(u.jsx)("div",{children:Object(u.jsx)(b,{title:e.threadName,description:e.threadDescription,author:e.threadAuthor,type:"topic"})}),Object(u.jsx)("div",{className:"topics",children:e.popularPosts})]}),function(){if(console.log(e.userLogged),"unknown"!=e.userLogged)return Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsx)("textarea",{id:"post_text"}),Object(u.jsx)("button",{type:"button",onClick:t,children:"Dodaj odpowied\u017a"})]})}()]})};n(559);var P,N=function(e){var t=Object(o.useState)(Object(d.getCookie)("jwt")),n=Object(r.a)(t,2),a=n[0],c=(n[1],Object(o.useState)("Zaloguj")),i=Object(r.a)(c,2),j=i[0],h=i[1],p=a?Object(l.a)(Object(d.getCookie)("jwt")).sub:"unknown",b=Object(o.useState)([]),f=Object(r.a)(b,2),O=f[0],g=f[1];Object(o.useEffect)((function(){e.setUserLogged(p),P(),fetch("https://projekt-pp-backend.herokuapp.com/authorities",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){200==e.status&&(w=t[0].authority)}))}))}));var k=function(){Object(d.setCookie)("jwt","",-1),document.location.reload()},v=function(){e.setPage(e.PageEnum.add_thread)},x=function(){e.setPage(e.PageEnum.add_section)},E=function(){e.setPage(e.PageEnum.register)},P=function(){fetch("https://projekt-pp-backend.herokuapp.com/mostPopularTopics/1",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,o=[],a=0,c=Object(s.a)(t);try{var i=function(){var e=n.value;if(a++,o.push(Object(u.jsx)("div",{children:Object(u.jsx)(T,{title:e.title,onClick:function(){return N(e.title,e.login,e.description,e.id)}})})),a>4)return"break"};for(c.s();!(n=c.n()).done;){if("break"===i())break}}catch(r){c.e(r)}finally{c.f()}g(o)}}))}))},N=function(t,n,o,a){fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(a,"/post"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,c=[],i=Object(s.a)(n);try{var r=function(){var e=o.value;c.push(Object(u.jsx)(m,{title:e.text,author:e.login,createDate:e.createDate,onClick:function(){!function(e,t){fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(t,"/post/").concat(e),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){e.ok?document.location.reload():alert("b\u0142\u0105d")}))}(e.id,a)}}))};for(i.s();!(o=i.n()).done;)r()}catch(j){i.e(j)}finally{i.f()}e.setPopularPosts(c)}}))})),e.setThreadName(t),e.setThreadDescription(o),e.setThreadAuthor(n),e.setThreadId(a),e.setPage(e.PageEnum.opened_thread)},S=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("Logowanie..."),t={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value},fetch("https://projekt-pp-backend.herokuapp.com/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){200===e.status?(Object(d.setCookie)("jwt",t.jwt,10),document.location.reload()):(h("B\u0142\u0105d ".concat(e.status)),setTimeout((function(){h("Zaloguj")}),3e3))}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"sidebar",children:[function(){if(e.page!=e.PageEnum.register)return a?Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsxs)("p",{children:["@",p]}),Object(u.jsx)("button",{type:"button",onClick:k,children:"Wyloguj"})]}):Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("button",{type:"button",onClick:S,children:j}),Object(u.jsx)("button",{type:"button",onClick:E,children:"Zarejestruj"})]})}(),Object(u.jsx)("div",{style:{marginTop:"100px",height:"1px"}}),Object(u.jsx)("button",{style:{marginTop:"100px!important"},type:"button",className:"wide_button",onClick:P,children:"Najpopularniejsze tematy"}),Object(u.jsx)("div",{className:"popularThreads",children:O}),function(){if("unknown"!==p)return Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:v,children:"Dodaj temat"})}(),function(){if("ROLE_ADMIN"===w)return Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:x,children:"Dodaj sekcje"})}(),Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:function(){e.setPage(e.PageEnum.home)},children:"Strona G\u0142\xf3wna"})]})};var S=function(e){var t=Object(o.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1],i=function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")};return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/authorities",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){200==e.status&&(P=t[0].authority)}))})),fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,a=[],r=Object(s.a)(n);try{var j=function(){var t=o.value;a.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic/").concat(n),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(o){200==t.status&&(e.setThreadId(n),e.setPage(e.PageEnum.thread),e.setThreadName(o.title),e.setThreadDescription(o.description),e.setThreadAuthor(o.login))}))}));var n},children:Object(u.jsx)(b,{title:t.title,closeSection:i,description:t.description,author:t.login,postRole:P,onClick:function(){var n;n=t.id,fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic/").concat(n),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){e.ok?document.location.reload():alert("b\u0142\u0105d")}))},type:"topic"})}))};for(r.s();!(o=r.n()).done;)j()}catch(h){r.e(h)}finally{r.f()}c(a)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:i,children:Object(u.jsx)(b,{title:e.sectionName,type:"section"})}),Object(u.jsx)("div",{className:"threads",children:a})]})};var _=function(){var e=Object.freeze({heroku_wait:0,home:1,register:2,section:3,thread:4,add_thread:5,add_section:6,opened_thread:7}),t=Object(o.useState)(e.heroku_wait),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(0),s=Object(r.a)(i,2),d=s[0],l=s[1],b=Object(o.useState)("Wczytywanie..."),f=Object(r.a)(b,2),m=f[0],g=f[1],x=Object(o.useState)("Wczytywanie..."),y=Object(r.a)(x,2),C=y[0],T=y[1],w=Object(o.useState)("Wczytywanie..."),P=Object(r.a)(w,2),_=P[0],I=P[1],A=Object(o.useState)("Wczytywanie..."),B=Object(r.a)(A,2),D=B[0],z=B[1],L=Object(o.useState)(0),G=Object(r.a)(L,2),R=G[0],F=G[1],J=Object(o.useState)("unknown"),W=Object(r.a)(J,2),M=W[0],U=W[1],Z=Object(o.useState)([]),H=Object(r.a)(Z,2),q=H[0],X=H[1];return Object(u.jsxs)("div",{id:"app",children:[Object(u.jsx)(N,{page:a,setPage:c,PageEnum:e,setUserLogged:U,setThreadName:T,setThreadDescription:I,setThreadAuthor:z,setThreadId:F,setPopularPosts:X}),Object(u.jsx)("div",{className:"container",children:function(){switch(a){case e.heroku_wait:return Object(u.jsx)(p,{setPage:c,PageEnum:e});case e.home:return Object(u.jsx)(v,{setPage:c,PageEnum:e,setSectionId:l,setSectionName:g});case e.register:return Object(u.jsx)(k,{});case e.section:return Object(u.jsx)(S,{setPage:c,PageEnum:e,sectionName:m,sectionId:d,setSectionName:g,setThreadName:T,setThreadDescription:I,setThreadAuthor:z,setThreadId:F});case e.thread:return Object(u.jsx)(O,{setPage:c,PageEnum:e,sectionName:m,setSectionName:g,threadName:C,threadDescription:_,threadAuthor:D,threadId:R,userLogged:M});case e.add_thread:return Object(u.jsx)(j,{});case e.add_section:return Object(u.jsx)(h,{});case e.opened_thread:return Object(u.jsx)(E,{setPage:c,PageEnum:e,setThreadName:T,setThreadDescription:I,setThreadAuthor:z,setThreadId:F,threadName:C,threadDescription:_,threadAuthor:D,threadId:R,userLogged:M,popularPosts:q,setPopularPosts:X})}}()})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,699)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root")),I()}},[[697,1,2]]]);
//# sourceMappingURL=main.da6d5521.chunk.js.map