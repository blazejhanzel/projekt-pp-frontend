(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},33:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),c=n(18),o=n.n(c),r=(n(135),n(4)),s=(n(33),n(17)),u=(n(136),n(5)),d=n(1);var j=function(e){var t=Object(i.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1];return Object(i.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,i=[],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(Object(d.jsx)("option",{value:o.id,children:o.name}))}}catch(r){a.e(r)}finally{a.f()}c(i)}}))}))}),[]),Object(d.jsxs)("div",{id:"addThreadForm",children:[Object(d.jsx)("select",{id:"section",name:"sections",children:a}),Object(d.jsx)("input",{type:"text",id:"topic_filed",placeholder:"Nazwa tematu"}),Object(d.jsx)("textarea",{}),Object(d.jsx)("button",{type:"button",children:"Dodaj w\u0105tek"})]})};n(432);var h=function(e){var t=new XMLHttpRequest;return t.onreadystatechange=function(){4==this.readyState&&e.setPage(e.PageEnum.home)},t.open("GET","https://projekt-pp-backend.herokuapp.com/swagger-ui.html",!0),t.send(),Object(d.jsx)("div",{id:"HerokuWait",children:Object(d.jsx)("div",{id:"container",children:Object(d.jsxs)("div",{id:"box",children:[Object(d.jsx)("div",{className:"lds-dual-ring"}),Object(d.jsx)("h1",{children:"Page is being loaded..."}),Object(d.jsx)("h3",{children:"Server is starting, this can take up to one minute..."}),Object(d.jsx)("h5",{children:"Servers are going to sleep automatically when no load is detected to save server resources."})]})})})};var l=function(e){return Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("div",{children:e.title}),Object(d.jsx)("div",{className:"username",children:e.author&&"@"+e.author}),Object(d.jsx)("div",{className:"info",children:e.description})]})};var p=function(e){return Object(d.jsxs)("div",{className:"post",children:[Object(d.jsxs)("div",{className:"username",children:["@",e.author]}),Object(d.jsx)("div",{className:"info",children:e.createDate.slice(0,19).replace("T"," ")}),e.title]})};var b=function(e){var t=Object(i.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1];return Object(i.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/post",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,i=[],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(Object(d.jsx)(p,{title:o.text,author:o.author.login,createDate:o.createDate}))}}catch(r){a.e(r)}finally{a.f()}c(i)}}))}))}),[]),Object(d.jsxs)("div",{className:"sections",children:[Object(d.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")},children:Object(d.jsx)(l,{title:e.sectionName})}),Object(d.jsxs)("div",{className:"threads",children:[Object(d.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.section)},children:Object(d.jsx)(l,{title:e.threadName,description:e.threadDescription,author:e.threadAuthor})}),Object(d.jsx)("div",{className:"topics",children:a})]})]})};var f=function(){return Object(d.jsxs)("div",{id:"registerForm",children:[Object(d.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(d.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(d.jsx)("input",{type:"text",id:"email_form",placeholder:"email"}),Object(d.jsx)("button",{type:"button",children:"Zarejestruj"})]})};var O=function(e){var t=Object(i.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1];return Object(i.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var i,a=[],o=Object(s.a)(n);try{var r=function(){var t=i.value;a.push(Object(d.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/"+n,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){200==t.status&&(e.setPage(e.PageEnum.section),e.setSectionName(n.name))}))}));var n},children:Object(d.jsx)(l,{title:t.name})}))};for(o.s();!(i=o.n()).done;)r()}catch(j){o.e(j)}finally{o.f()}c(a)}}))}))}),[]),Object(d.jsx)("div",{className:"sections",children:a})},m=n(82),g=n.n(m),v=n(130),x=(n(433),n(131));var k=function(e){return Object(d.jsx)("div",{className:"popularItem",children:Object(d.jsx)("div",{children:e.title})})};var y=function(e){var t=Object(i.useState)(Object(u.getCookie)("jwt")),n=Object(r.a)(t,2),a=n[0],c=(n[1],Object(i.useState)("Zaloguj")),o=Object(r.a)(c,2),j=o[0],h=o[1],l=a?Object(x.a)(Object(u.getCookie)("jwt")).sub:"unknown",p=Object(i.useState)([]),b=Object(r.a)(p,2),f=b[0],O=b[1],m=function(){Object(u.setCookie)("jwt","",-1),document.location.reload()},y=function(){e.setPage(e.PageEnum.register)},w=function(t){fetch("https://projekt-pp-backend.herokuapp.com/topic/"+t,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){200==t.status&&(e.setPage(e.PageEnum.thread),e.setThreadName(n.title),e.setThreadDescription(n.description),e.setThreadAuthor(n.author.login))}))}))},C=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("Logowanie..."),t={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value},fetch("https://projekt-pp-backend.herokuapp.com/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){200===e.status?(Object(u.setCookie)("jwt",t.jwt,10),document.location.reload()):alert(e.status)}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"sidebar",children:[function(){if(e.page!=e.PageEnum.register)return a?Object(d.jsxs)("div",{id:"login_form",children:[Object(d.jsxs)("p",{children:["@",l]}),Object(d.jsx)("button",{type:"button",onClick:m,children:"Wyloguj"})]}):Object(d.jsxs)("div",{id:"login_form",children:[Object(d.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(d.jsx)("button",{type:"button",onClick:C,children:j}),Object(d.jsx)("button",{type:"button",onClick:y,children:"Zarejestruj"})]})}(),Object(d.jsx)("input",{type:"text",id:"search_form",placeholder:"wyszukaj"}),Object(d.jsx)("button",{type:"button",className:"wide_button",onClick:function(){fetch("https://projekt-pp-backend.herokuapp.com/mostPopularTopics/0",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,i=[],a=0,c=Object(s.a)(t);try{var o=function(){var e=n.value;if(a++,i.push(Object(d.jsx)("div",{onClick:function(){return w(e.id)},children:Object(d.jsx)(k,{title:e.title})})),a>4)return"break"};for(c.s();!(n=c.n()).done;){if("break"===o())break}}catch(r){c.e(r)}finally{c.f()}O(i)}}))}))},children:"Najpopularniejsze tematy"}),Object(d.jsx)("div",{className:"popularThreads",children:f}),Object(d.jsx)("button",{type:"button",className:"wide_button",onClick:function(){e.setPage(e.PageEnum.add_thread)},children:"Dodaj w\u0105tek"})]})};var w=function(e){var t=Object(i.useState)([]),n=Object(r.a)(t,2),a=n[0],c=n[1],o=function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")};return Object(i.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/topic",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var i,a=[],r=Object(s.a)(n);try{var j=function(){var t=i.value;a.push(Object(d.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/topic/"+n,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(u.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){200==t.status&&(e.setPage(e.PageEnum.thread),e.setThreadName(n.title),e.setThreadDescription(n.description),e.setThreadAuthor(n.author.login))}))}));var n},children:Object(d.jsx)(l,{title:t.title,closeSection:o,description:t.description,author:t.author.login})}))};for(r.s();!(i=r.n()).done;)j()}catch(h){r.e(h)}finally{r.f()}c(a)}}))}))}),[]),Object(d.jsxs)("div",{className:"sections",children:[Object(d.jsx)("div",{onClick:o,children:Object(d.jsx)(l,{title:e.sectionName})}),Object(d.jsx)("div",{className:"threads",children:a})]})};var C=function(){var e=Object.freeze({heroku_wait:0,home:1,register:2,section:3,thread:4,add_thread:5}),t=Object(i.useState)(e.heroku_wait),n=Object(r.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)("Wczytywanie..."),s=Object(r.a)(o,2),u=s[0],l=s[1],p=Object(i.useState)("Wczytywanie..."),m=Object(r.a)(p,2),g=m[0],v=m[1],x=Object(i.useState)("Wczytywanie..."),k=Object(r.a)(x,2),C=k[0],N=k[1],T=Object(i.useState)("Wczytywanie..."),P=Object(r.a)(T,2),E=P[0],S=P[1];return Object(d.jsxs)("div",{id:"app",children:[Object(d.jsx)(y,{page:a,setPage:c,PageEnum:e}),Object(d.jsx)("div",{className:"container",children:function(){switch(a){case e.heroku_wait:return Object(d.jsx)(h,{setPage:c,PageEnum:e});case e.home:return Object(d.jsx)(O,{setPage:c,PageEnum:e,setSectionName:l});case e.register:return Object(d.jsx)(f,{});case e.section:return Object(d.jsx)(w,{setPage:c,PageEnum:e,sectionName:u,setSectionName:l,setThreadName:v,setThreadDescription:N,setThreadAuthor:S});case e.thread:return Object(d.jsx)(b,{setPage:c,PageEnum:e,sectionName:u,setSectionName:l,threadName:g,threadDescription:C,threadAuthor:E});case e.add_thread:return Object(d.jsx)(j,{})}}()})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),N()},5:function(e,t){e.exports.getCookie=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},e.exports.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+60*n*60*1e3);var a="expires="+i.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}}},[[434,1,2]]]);
//# sourceMappingURL=main.274c2901.chunk.js.map