(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},33:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n.n(o),i=n(18),a=n.n(i),s=(n(135),n(3)),r=(n(33),n(17)),d=(n(136),n(7)),u=n(1);var j=function(e){var t=Object(o.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],a=Object(o.useState)(null),j=Object(s.a)(a,2),l=j[0],h=j[1];return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section/",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,o=[],c=Object(r.a)(t);try{for(c.s();!(n=c.n()).done;){var a=n.value;o.push(Object(u.jsx)("option",{value:a.id,children:a.name}))}}catch(s){c.e(s)}finally{c.f()}i(o)}}))}))}),[]),Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsxs)("select",{id:"section",name:"sections",onChange:function(e){h(e.target.value)},children:[Object(u.jsx)("option",{value:"null",children:"Wybierz sekcj\u0119"}),c]}),Object(u.jsx)("input",{type:"text",id:"topic_field",placeholder:"Nazwa tematu"}),Object(u.jsx)("textarea",{id:"description"}),Object(u.jsx)("button",{type:"button",onClick:function(){if(null!=l){var e=document.getElementById("topic_field").value,t=document.getElementById("description").value;if(e&&t){var n={title:e,description:t};fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(l,"/topic"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(n)}).then((function(e){return e.json().then((function(t){200==e.status?alert("W\u0105tek dodano pomy\u015blnie!"):alert(e.status)}))}))}}},children:"Dodaj w\u0105tek"})]})};n(432);var l=function(e){var t=new XMLHttpRequest;return t.onreadystatechange=function(){4==this.readyState&&e.setPage(e.PageEnum.home)},t.open("GET","https://projekt-pp-backend.herokuapp.com/swagger-ui.html",!0),t.send(),Object(u.jsx)("div",{id:"HerokuWait",children:Object(u.jsx)("div",{id:"container",children:Object(u.jsxs)("div",{id:"box",children:[Object(u.jsx)("div",{className:"lds-dual-ring"}),Object(u.jsx)("h1",{children:"Page is being loaded..."}),Object(u.jsx)("h3",{children:"Server is starting, this can take up to one minute..."}),Object(u.jsx)("h5",{children:"Servers are going to sleep automatically when no load is detected to save server resources."})]})})})};var h=function(e){return Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("div",{children:e.title}),Object(u.jsx)("div",{className:"username",children:e.author&&"@"+e.author}),Object(u.jsx)("div",{className:"info",children:e.description})]})};var p=function(e){return Object(u.jsxs)("div",{className:"post",children:[Object(u.jsxs)("div",{className:"username",children:["@",e.author]}),Object(u.jsx)("div",{className:"info",children:e.createDate.slice(0,19).replace("T"," ")}),e.title]})};var b=function(e){var t=Object(o.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],a=function(){var t={text:document.getElementById("post_text").value};fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")},body:JSON.stringify(t)}).then((function(t){return t.json().then((function(n){200==t.status?(e.setPage(e.PageEnum.section),e.setPage(e.PageEnum.thread)):alert(t.status)}))}))};return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/topic/".concat(e.threadId,"/post"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,o=[],c=Object(r.a)(t);try{for(c.s();!(n=c.n()).done;){var a=n.value;o.push(Object(u.jsx)(p,{title:a.text,author:a.login,createDate:a.createDate}))}}catch(s){c.e(s)}finally{c.f()}i(o)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")},children:Object(u.jsx)(h,{title:e.sectionName,type:"section"})}),Object(u.jsxs)("div",{className:"threads",children:[Object(u.jsx)("div",{onClick:function(){e.setPage(e.PageEnum.section)},children:Object(u.jsx)(h,{title:e.threadName,description:e.threadDescription,author:e.threadAuthor,type:"topic"})}),Object(u.jsx)("div",{className:"topics",children:c})]}),function(){if(console.log(e.userLogged),"unknown"!=e.userLogged)return Object(u.jsxs)("div",{id:"addThreadForm",children:[Object(u.jsx)("textarea",{id:"post_text"}),Object(u.jsx)("button",{type:"button",onClick:a,children:"Dodaj odpowied\u017a"})]})}()]})};var f=function(){return Object(u.jsxs)("div",{id:"registerForm",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("input",{type:"text",id:"email_form",placeholder:"email"}),Object(u.jsx)("button",{type:"button",onClick:function(){var e={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value,email:document.getElementById("email_form").value};fetch("https://projekt-pp-backend.herokuapp.com/register",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){200===e.status?(document.location.reload(),alert("Mo\u017cesz si\u0119 zalogowa\u0107")):alert(e.status)}))}))},children:"Zarejestruj"})]})};var m=function(e){var t=Object(o.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section/",{method:"GET"}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,c=[],a=Object(r.a)(n);try{var s=function(){var t=o.value;c.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(o){200==t.status&&(e.setSectionId(n),e.setPage(e.PageEnum.section),e.setSectionName(o.name))}))}));var n},children:Object(u.jsx)(h,{title:t.name,type:"section"})}))};for(a.s();!(o=a.n()).done;)s()}catch(j){a.e(j)}finally{a.f()}i(c)}}))}))}),[]),Object(u.jsx)("div",{className:"sections",children:c})},O=n(82),g=n.n(O),v=n(130),x=(n(433),n(131));var k=function(e){return Object(u.jsx)("div",{className:"popularItem",children:Object(u.jsx)("div",{children:e.title})})};var y=function(e){var t=Object(o.useState)(Object(d.getCookie)("jwt")),n=Object(s.a)(t,2),c=n[0],i=(n[1],Object(o.useState)("Zaloguj")),a=Object(s.a)(i,2),j=a[0],l=a[1],h=c?Object(x.a)(Object(d.getCookie)("jwt")).sub:"unknown",p=Object(o.useState)([]),b=Object(s.a)(p,2),f=b[0],m=b[1];Object(o.useEffect)((function(){e.setUserLogged(h)}));var O=function(){Object(d.setCookie)("jwt","",-1),document.location.reload()},y=function(){e.setPage(e.PageEnum.add_thread)},w=function(){e.setPage(e.PageEnum.register)},C=function(e){},T=function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("Logowanie..."),t={username:document.getElementById("login_field").value,password:document.getElementById("password_field").value},fetch("https://projekt-pp-backend.herokuapp.com/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json().then((function(t){200===e.status?(Object(d.setCookie)("jwt",t.jwt,10),document.location.reload()):(l("B\u0142\u0105d ".concat(e.status)),setTimeout((function(){l("Zaloguj")}),3e3))}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"sidebar",children:[function(){if(e.page!=e.PageEnum.register)return c?Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsxs)("p",{children:["@",h]}),Object(u.jsx)("button",{type:"button",onClick:O,children:"Wyloguj"})]}):Object(u.jsxs)("div",{id:"login_form",children:[Object(u.jsx)("input",{type:"text",id:"login_field",placeholder:"login"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",id:"password_field",placeholder:"has\u0142o"}),Object(u.jsx)("button",{type:"button",onClick:T,children:j}),Object(u.jsx)("button",{type:"button",onClick:w,children:"Zarejestruj"})]})}(),Object(u.jsx)("div",{style:{marginTop:"100px",height:"1px"}}),Object(u.jsx)("button",{style:{marginTop:"100px!important"},type:"button",className:"wide_button",onClick:function(){fetch("https://projekt-pp-backend.herokuapp.com/mostPopularTopics/1",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json().then((function(t){if(200==e.status){var n,o=[],c=0,i=Object(r.a)(t);try{var a=function(){var e=n.value;if(c++,o.push(Object(u.jsx)("div",{onClick:function(){return C(e.id)},children:Object(u.jsx)(k,{title:e.title})})),c>4)return"break"};for(i.s();!(n=i.n()).done;){if("break"===a())break}}catch(s){i.e(s)}finally{i.f()}m(o)}}))}))},children:"Najpopularniejsze tematy"}),Object(u.jsx)("div",{className:"popularThreads",children:f}),function(){if("unknown"!==h)return Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:y,children:"Dodaj w\u0105tek"})}(),Object(u.jsx)("button",{type:"button",className:"wide_button",onClick:function(){e.setPage(e.PageEnum.home)},children:"Strona G\u0142\xf3wna"})]})};var w=function(e){var t=Object(o.useState)([]),n=Object(s.a)(t,2),c=n[0],i=n[1],a=function(){e.setPage(e.PageEnum.home),e.setSectionName("\u0141adowanie...")};return Object(o.useEffect)((function(){fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(n){if(200==t.status){var o,c=[],s=Object(r.a)(n);try{var j=function(){var t=o.value;c.push(Object(u.jsx)("div",{onClick:function(){return n=t.id,void fetch("https://projekt-pp-backend.herokuapp.com/section/".concat(e.sectionId,"/topic/").concat(n),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Object(d.getCookie)("jwt")}}).then((function(t){return t.json().then((function(o){200==t.status&&(e.setThreadId(n),e.setPage(e.PageEnum.thread),e.setThreadName(o.title),e.setThreadDescription(o.description),e.setThreadAuthor(o.login))}))}));var n},children:Object(u.jsx)(h,{title:t.title,closeSection:a,description:t.description,author:t.login,type:"topic"})}))};for(s.s();!(o=s.n()).done;)j()}catch(l){s.e(l)}finally{s.f()}i(c)}}))}))}),[]),Object(u.jsxs)("div",{className:"sections",children:[Object(u.jsx)("div",{onClick:a,children:Object(u.jsx)(h,{title:e.sectionName,type:"section"})}),Object(u.jsx)("div",{className:"threads",children:c})]})};var C=function(){var e=Object.freeze({heroku_wait:0,home:1,register:2,section:3,thread:4,add_thread:5}),t=Object(o.useState)(e.heroku_wait),n=Object(s.a)(t,2),c=n[0],i=n[1],a=Object(o.useState)(0),r=Object(s.a)(a,2),d=r[0],h=r[1],p=Object(o.useState)("Wczytywanie..."),O=Object(s.a)(p,2),g=O[0],v=O[1],x=Object(o.useState)("Wczytywanie..."),k=Object(s.a)(x,2),C=k[0],T=k[1],P=Object(o.useState)("Wczytywanie..."),N=Object(s.a)(P,2),S=N[0],E=N[1],_=Object(o.useState)("Wczytywanie..."),I=Object(s.a)(_,2),B=I[0],z=I[1],A=Object(o.useState)(0),D=Object(s.a)(A,2),G=D[0],L=D[1],W=Object(o.useState)("unknown"),F=Object(s.a)(W,2),J=F[0],U=F[1];return Object(u.jsxs)("div",{id:"app",children:[Object(u.jsx)(y,{page:c,setPage:i,PageEnum:e,setUserLogged:U}),Object(u.jsx)("div",{className:"container",children:function(){switch(c){case e.heroku_wait:return Object(u.jsx)(l,{setPage:i,PageEnum:e});case e.home:return Object(u.jsx)(m,{setPage:i,PageEnum:e,setSectionId:h,setSectionName:v});case e.register:return Object(u.jsx)(f,{});case e.section:return Object(u.jsx)(w,{setPage:i,PageEnum:e,sectionName:g,sectionId:d,setSectionName:v,setThreadName:T,setThreadDescription:E,setThreadAuthor:z,setThreadId:L});case e.thread:return Object(u.jsx)(b,{setPage:i,PageEnum:e,sectionName:g,setSectionName:v,threadName:C,threadDescription:S,threadAuthor:B,threadId:G,userLogged:J});case e.add_thread:return Object(u.jsx)(j,{})}}()})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),i(e),a(e)}))};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),T()},7:function(e,t){e.exports.getCookie=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var c=n[o];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(t))return c.substring(t.length,c.length)}return""},e.exports.setCookie=function(e,t,n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3);var c="expires="+o.toUTCString();document.cookie=e+"="+t+";"+c+";path=/"}}},[[434,1,2]]]);
//# sourceMappingURL=main.24ce2e4e.chunk.js.map